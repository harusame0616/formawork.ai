# 利用可能コマンド

利用可能コマンドを最優先で使用してください。

## 開発

### 開発サーバー起動

Supabase の起動と Next.js 開発サーバーを起動します。
タイムゾーンは Vercel に合わせて UTC で実行します。

- Local:        http://localhost:3000
- Network:      http://10.0.0.27:3000

```bash
pnpm -w dev
```

### ビルド
```bash
pnpm -w build
```

### 本番サーバー起動
```bash
pnpm -w start
```
## Supabase

### Supabase 起動
```bash
pnpm -w supabase:start
```

### Supabase 停止
```bash
pnpm -w supabase:stop
```

### Supabase シード
Supabase Auth 認証ユーザーをシードします。
```bash
pnpm -w supabase:seed
```

## データベース

### マイグレーションファイル生成
drizzle kit を使用してマイグレーションファイルを生成します。
DB への適用はされません。

```bash
pnpm -w db:generate
```

### マイグレーション実行
生成されたマイグレーション SQL をもとにマイグレーションを実施します。

```bash
pnpm -w db:migrate
```

### データベースリセット
テーブル・マイグレーション履歴を削除し、マイグレーションの再適用、シードの実行を行います。

```bash
pnpm -w db:reset
```

### シードデータ投入
DB に開発用のシードデータを投入します。
Supabase の Auth のシーディングは行いません。

```bash
pnpm -w db:seed
```

## テスト

### ブラウザテスト（Vitest Browser Mode）
```bash
pnpm -w test:browser
```

### サーバーテスト
```bash
pnpm -w test:server
```

### E2E テスト
```bash
pnpm -w test:e2e
```

## バリデーション

### バリデーションチェック（タスク完了時必須）
```bash
pnpm -w validate:check
```
- lint, format, デッドコード検出, スペルチェック, 型チェック

### 自動修正
```bash
pnpm -w validate:fix
```
- lint, format の自動修正
- デッドコードの自動削除

## 個別パッケージ操作

個別パッケージ操作は利用可能コマンドで代替できない場合のみ使用

### 特定パッケージでコマンド実行
```bash
pnpm --filter <package-name> <command>
```
例: `pnpm --filter web dev`
